<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Undangan Pernikahan Aldi & Dilla</title>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <style>
    /* --- CSS Reset & Global Styles --- */
    :root {
      --primary-font: 'Playfair Display', serif;
      --secondary-font: 'Montserrat', sans-serif;
      --bg-color: #f8f4e9;
      --text-color: #5a4a42;
      --accent-color-dark: #8c6d5e;
      --accent-color-light: #a68b7c;
      --border-color: #d4c1ab;
      --card-bg: rgba(255, 255, 255, 0.95);
      --card-alt-bg: rgba(244, 238, 228, 0.8);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--secondary-font);
      background-color: var(--bg-color);
      color: var(--text-color);
      line-height: 1.8;
      overflow-x: hidden;
      /* Disembunyikan dulu sampai cover dibuka */
      overflow-y: hidden;
    }

    .hidden-for-animation {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }

    .visible {
      opacity: 1;
      transform: translateY(0);
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 1rem;
      position: relative;
      z-index: 2;
    }

    /* --- Floating Petals Decoration --- */
    .floating-petals {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    .petal {
      position: absolute;
      background: rgba(140, 109, 94, 0.2);
      border-radius: 50% 10% 50% 50%;
      opacity: 0;
      animation: fall linear infinite;
    }
    @keyframes fall {
      0% {
        transform: translateY(-20vh) rotate(0deg) translateX(0);
        opacity: 0.7;
      }
      100% {
        transform: translateY(120vh) rotate(720deg) translateX(calc(var(--sway) * 80px));
        opacity: 0;
      }
    }

    /* --- Cover / Amplop Pembuka --- */
    #cover {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-color) url('https://www.transparenttextures.com/patterns/paper-fibers.png');
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      z-index: 2000;
      padding: 20px;
      transition: opacity 1.5s ease-out, visibility 1.5s;
    }
    #cover.hidden {
      opacity: 0;
      visibility: hidden;
    }
    .cover-content {
      animation: fadeIn 1s ease-in;
    }
    .cover-content .subtitle {
        font-size: 1rem;
        letter-spacing: 2px;
    }
    .cover-content h1 {
        font-family: var(--primary-font);
        font-size: 3rem;
        color: var(--accent-color-dark);
        margin: 1rem 0;
    }
    .cover-guest {
        margin: 2rem 0;
    }
    #guestNameToOpen {
        font-family: var(--primary-font);
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--text-color);
        display: block;
        margin-top: 0.5rem;
    }
    #openInvitation {
        background: var(--accent-color-dark);
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 50px;
        cursor: pointer;
        font-size: 1rem;
        font-family: var(--secondary-font);
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    #openInvitation:hover {
        background: var(--accent-color-light);
        transform: translateY(-3px);
    }
    #openInvitation i {
        margin-right: 8px;
    }

    /* --- Header --- */
    .header {
      text-align: center;
      padding: 4rem 0 2rem 0;
      position: relative;
    }
    .couple-names {
      font-family: var(--primary-font);
      font-size: clamp(2.5rem, 8vw, 4rem);
      margin: 1rem 0;
      color: var(--accent-color-dark);
      text-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    .subtitle {
      font-size: clamp(0.9rem, 3vw, 1.1rem);
      font-weight: 300;
      letter-spacing: 4px;
      text-transform: uppercase;
      color: var(--accent-color-light);
    }
    .header .subtitle {
        margin-bottom: 1rem;
    }

    /* --- Invitation Card --- */
    .invitation-card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: clamp(1.5rem, 5vw, 3rem);
      box-shadow: 0 10px 30px rgba(140, 109, 94, 0.1);
      margin: 1rem 0;
      border: 1px solid rgba(212, 193, 171, 0.3);
      text-align: center;
    }
    .message {
      font-size: 1.1rem;
      margin: 1.5rem 0;
      line-height: 1.8;
    }
    .couple-details {
        margin: 2rem 0;
    }
    .couple-details h2 {
        font-family: var(--primary-font);
        font-size: 2.5rem;
        color: var(--accent-color-dark);
    }
    .couple-details p {
        font-size: 1.1rem;
        margin-top: 0.5rem;
    }
    .ampersand {
        font-family: var(--primary-font);
        font-size: 3rem;
        color: var(--accent-color-light);
        margin: 1rem 0;
    }
    
    /* --- Floral Divider --- */
    .floral-divider {
      height: 2px;
      width: 80px;
      background-color: var(--border-color);
      margin: 3rem auto;
    }

    /* --- Event Details, Countdown, Gallery, Gift --- */
    .section-title {
        font-family: var(--primary-font);
        font-size: clamp(2rem, 6vw, 2.5rem);
        text-align: center;
        margin: 3rem 0 2rem 0;
        color: var(--accent-color-dark);
    }
    .event-details, .gallery-grid {
      display: grid;
      gap: 1.5rem;
    }
    .event-details {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
    .detail-card {
      text-align: center;
      padding: 2rem 1.5rem;
      border-radius: 10px;
      background: var(--card-alt-bg);
      transition: all 0.4s ease;
      cursor: pointer;
    }
    .detail-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(140, 109, 94, 0.1);
    }
    .detail-card i {
      font-size: 2.5rem;
      color: var(--accent-color-dark);
      margin-bottom: 1rem;
    }
    .detail-title {
      font-family: var(--primary-font);
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--accent-color-dark);
    }
    .countdown-timer {
      display: flex;
      justify-content: center;
      gap: 1rem;
      text-align: center;
    }
    .timer-unit {
      background: var(--card-alt-bg);
      border-radius: 8px;
      padding: 1rem;
      min-width: 70px;
      box-shadow: 0 5px 15px rgba(140, 109, 94, 0.05);
    }
    .timer-value {
      font-size: 2rem;
      font-weight: 500;
      color: var(--accent-color-dark);
    }
    .timer-label {
      font-size: 0.8rem;
      text-transform: uppercase;
    }

    /* --- Gallery --- */
    .gallery-grid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    }
    .gallery-item img {
        width: 100%;
        height: 250px;
        object-fit: cover;
        border-radius: 10px;
        cursor: pointer;
        transition: transform 0.3s ease;
    }
    .gallery-item img:hover {
        transform: scale(1.05);
    }
    .video-container {
        position: relative;
        padding-bottom: 56.25%; /* 16:9 */
        height: 0;
        border-radius: 10px;
        overflow: hidden;
        margin-top: 1.5rem;
    }
    .video-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    /* Lightbox for Gallery */
    #lightbox {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.85);
        z-index: 3000;
        justify-content: center;
        align-items: center;
    }
    #lightbox img {
        max-width: 90%;
        max-height: 85%;
        border-radius: 5px;
    }
    #lightbox.active {
        display: flex;
    }

    /* --- Digital Gift --- */
    .gift-card {
        background: var(--card-alt-bg);
        padding: 2rem;
        border-radius: 10px;
        text-align: center;
    }
    .gift-card i {
        font-size: 2.5rem;
        color: var(--accent-color-dark);
        margin-bottom: 1rem;
    }
    .bank-logo {
        height: 30px;
        margin-bottom: 1rem;
    }
    .account-number {
        font-size: 1.2rem;
        font-weight: 600;
        letter-spacing: 1px;
        margin-bottom: 1rem;
    }
    .copy-button {
        background: var(--accent-color-dark);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 50px;
        cursor: pointer;
        transition: background 0.3s;
    }
    .copy-button:hover {
        background: var(--accent-color-light);
    }

    /* --- RSVP Button --- */
    .rsvp-button {
      display: inline-block;
      width: auto;
      padding: 14px 40px;
      margin-top: 2rem;
      background: var(--accent-color-dark);
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.4s ease;
      box-shadow: 0 5px 15px rgba(140, 109, 94, 0.3);
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(140, 109, 94, 0.4); }
      70% { box-shadow: 0 0 0 15px rgba(140, 109, 94, 0); }
      100% { box-shadow: 0 0 0 0 rgba(140, 109, 94, 0); }
    }
    .rsvp-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(140, 109, 94, 0.4);
      animation: none;
    }

    /* --- Footer & Health Protocol --- */
    .footer, .health-protocol {
      text-align: center;
      padding: 3rem 1rem;
      color: var(--accent-color-light);
    }
    .health-protocol {
        background: var(--card-alt-bg);
        border-radius: 10px;
        margin: 2rem 0;
    }
    .footer p {
      font-style: italic;
      margin-bottom: 1rem;
    }

    /* --- Music Control --- */
    .music-control {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: rgba(140, 109, 94, 0.8);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 100;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      transition: all 0.4s ease;
    }
    .music-control:hover {
      background: var(--accent-color-light);
      transform: scale(1.1);
    }
    .music-control i {
      font-size: 1.2rem;
    }
    .music-control.playing i.fa-music { display: none; }
    .music-control.playing i.fa-pause { display: inline-block; }
    .music-control:not(.playing) i.fa-music { display: inline-block; }
    .music-control:not(.playing) i.fa-pause { display: none; }


    /* --- RSVP Modal --- */
    .modal {
      display: none;
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      justify-content: center; align-items: center;
      animation: fadeIn 0.3s ease;
    }
    .modal-content {
      background: white; padding: 2.5rem; border-radius: 15px;
      max-width: 500px; width: 90%;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      position: relative; animation: slideUp 0.5s ease;
    }
    @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; }}
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; }}
    .close-modal {
      position: absolute; top: 15px; right: 20px;
      font-size: 1.8rem; cursor: pointer; color: var(--accent-color-dark);
    }
    .modal-title {
      font-family: var(--primary-font); text-align: center; margin-bottom: 1.5rem;
      color: var(--accent-color-dark); font-size: 1.8rem;
    }
    .form-group { margin-bottom: 1.5rem; }
    .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
    .form-group input, .form-group textarea, .form-group select {
      width: 100%; padding: 12px 15px; border: 1px solid var(--border-color);
      border-radius: 8px; font-family: var(--secondary-font); font-size: 1rem;
    }
    .attendance-options { display: flex; justify-content: center; gap: 1.5rem; }
    .attendance-option { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
    .attendance-circle {
      width: 70px; height: 70px; border-radius: 50%;
      display: flex; justify-content: center; align-items: center;
      margin-bottom: 0.5rem; background: #f8f4e9; border: 2px solid var(--border-color);
      transition: all 0.3s ease;
    }
    .attendance-circle i { font-size: 1.8rem; color: var(--accent-color-light); }
    .attendance-option.selected .attendance-circle { background: var(--accent-color-dark); border-color: var(--accent-color-dark); }
    .attendance-option.selected i { color: white; }
    .submit-btn {
      display: block; width: 100%; padding: 14px; background: var(--accent-color-dark);
      color: white; border: none; border-radius: 8px; font-size: 1.1rem; cursor: pointer;
    }
    .success-message { text-align: center; padding: 2rem; display: none; }
    .success-message i { font-size: 4rem; color: #4CAF50; margin-bottom: 1.5rem; }
    .loading { display: none; text-align: center; padding: 20px; }
    .loading-spinner {
      width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid var(--accent-color-dark);
      border-radius: 50%; margin: 0 auto 20px; animation: spin 1s linear infinite;
    }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
  </style>
</head>
<body>

  <!-- ======================================== -->
  <!--             COVER / AMPLOP               -->
  <!-- ======================================== -->
  <div id="cover">
    <div class="cover-content">
      <p class="subtitle">The Wedding Of</p>
      <h1>Aldi & Dilla</h1>
      <div class="cover-guest">
        <p>Kepada Yth. Bapak/Ibu/Saudara/i</p>
        <span id="guestNameToOpen">Tamu Undangan</span>
      </div>
      <button id="openInvitation">
        <i class="fas fa-envelope-open"></i>Buka Undangan
      </button>
    </div>
  </div>

  <!-- Main Content, initially hidden -->
  <main id="main-content" style="display: none;">
    <!-- Dekorasi Kelopak Bunga Jatuh -->
    <div class="floating-petals" id="petalsContainer"></div>
  
    <!-- Tombol Kontrol Musik -->
    <div class="music-control" id="musicControl">
      <i class="fas fa-music"></i>
      <i class="fas fa-pause"></i>
    </div>
  
    <!-- ======================================== -->
    <!--           MODAL RSVP FORM                -->
    <!-- ======================================== -->
    <div class="modal" id="rsvpModal">
      <div class="modal-content">
        <span class="close-modal" id="closeModal">&times;</span>
        <form id="rsvpFormElement">
          <h2 class="modal-title">Konfirmasi Kehadiran</h2>
          <div class="form-group">
            <label for="guestName">Nama Tamu</label>
            <input type="text" id="guestName" name="nama" readonly>
          </div>
          <div class="form-group">
            <label>Konfirmasi Kehadiran</label>
            <div class="attendance-options">
              <div class="attendance-option selected" data-value="Hadir">
                <div class="attendance-circle"><i class="fas fa-check"></i></div>
                <span>Hadir</span>
              </div>
              <div class="attendance-option" data-value="Tidak Hadir">
                <div class="attendance-circle"><i class="fas fa-times"></i></div>
                <span>Tidak Hadir</span>
              </div>
            </div>
            <input type="hidden" id="attendanceStatusInput" name="kehadiran" value="Hadir">
          </div>
          <div class="form-group">
            <label for="guestCount">Jumlah Orang yang Hadir</label>
            <select id="guestCount" name="jumlah">
              <option value="1">1 Orang</option>
              <option value="2" selected>2 Orang</option>
              <option value="3">3 Orang</option>
              <option value="4">4 Orang</option>
            </select>
          </div>
          <div class="form-group">
            <label for="guestMessage">Pesan/Ucapan (opsional)</label>
            <textarea id="guestMessage" name="pesan" placeholder="Tulis doa dan ucapan terbaik Anda..."></textarea>
          </div>
          <button type="button" class="submit-btn" id="submitRsvp">Kirim Konfirmasi</button>
        </form>
        <div class="loading" id="loadingIndicator">
          <div class="loading-spinner"></div>
          <p>Mengirim konfirmasi...</p>
        </div>
        <div class="success-message" id="successMessage">
          <i class="fas fa-check-circle"></i>
          <h2>Konfirmasi Terkirim!</h2>
          <p>Terima kasih atas konfirmasi dan doa restu Anda. Kehadiran Anda sangat berarti bagi kami.</p>
        </div>
      </div>
    </div>
  
    <div class="container">
      <!-- ======================================== -->
      <!--                  HEADER                  -->
      <!-- ======================================== -->
      <header class="header hidden-for-animation">
        <p class="subtitle">Kami mengundang Anda dalam pernikahan</p>
        <h1 class="couple-names">Aldi & Dilla</h1>
        <p>Sabtu, 20 Desember 2025</p>
      </header>
  
      <!-- ======================================== -->
      <!--             PROFIL MEMPELAI              -->
      <!-- ======================================== -->
      <section class="invitation-card hidden-for-animation">
        <p class="message">"Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri, agar kamu cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan sayang."<br><strong>(QS. Ar-Rum: 21)</strong></p>
        <div class="floral-divider"></div>
        <div class="couple-details">
            <div>
                <h2>Aldiansyah</h2>
                <p>Putra dari Bapak Japar & Ibu Marmi</p>
            </div>
            <div class="ampersand">&</div>
            <div>
                <h2>Dilla Amelia</h2>
                <p>Putri dari Bapak Fulan & Ibu Fulanah</p>
            </div>
        </div>
      </section>

      <!-- ======================================== -->
      <!--            DETAIL ACARA                -->
      <!-- ======================================== -->
      <section class="event-section hidden-for-animation">
        <h2 class="section-title">Save the Date</h2>
        <div class="event-details">
          <div class="detail-card">
            <i class="far fa-calendar-alt"></i>
            <div class="detail-title">Akad Nikah</div>
            <p>Sabtu, 20 Desember 2025</p>
            <p>Pukul 08.00 - 09.00 WIB</p>
          </div>
          <div class="detail-card">
            <i class="fas fa-glass-cheers"></i>
            <div class="detail-title">Resepsi</div>
            <p>Sabtu, 20 Desember 2025</p>
            <p>Pukul 10.00 WIB - Selesai</p>
          </div>
          <div class="detail-card" onclick="window.open('https://maps.app.goo.gl/KVEAfe1nf39zD9Fw7', '_blank')">
            <i class="fas fa-map-marker-alt"></i>
            <div class="detail-title">Lokasi Acara</div>
            <p>Gg Pendidikan No. 270<br>Rumah Bapak Japar & Ibu Marmi</p>
            <p style="margin-top:1rem; font-size:0.9rem; color: var(--accent-color-light);">(Klik untuk lihat peta)</p>
          </div>
        </div>
      </section>

      <!-- ======================================== -->
      <!--                COUNTDOWN                 -->
      <!-- ======================================== -->
      <section class="countdown-section hidden-for-animation">
        <div class="invitation-card">
          <h2 class="section-title" style="margin-top:0;">Menuju Hari Bahagia</h2>
          <div class="countdown-timer">
            <div class="timer-unit"><div class="timer-value" id="days">00</div><div class="timer-label">Hari</div></div>
            <div class="timer-unit"><div class="timer-value" id="hours">00</div><div class="timer-label">Jam</div></div>
            <div class="timer-unit"><div class="timer-value" id="minutes">00</div><div class="timer-label">Menit</div></div>
            <div class="timer-unit"><div class="timer-value" id="seconds">00</div><div class="timer-label">Detik</div></div>
          </div>
        </div>
      </section>

      <!-- ======================================== -->
      <!--                 GALLERY                  -->
      <!-- ======================================== -->
      <section class="gallery-section hidden-for-animation">
        <h2 class="section-title">Momen Bahagia Kami</h2>
        <div class="gallery-grid">
            <div class="gallery-item"><img src="https://picsum.photos/400/500?random=1" alt="Foto Aldi & Dilla 1"></div>
            <div class="gallery-item"><img src="https://picsum.photos/400/500?random=2" alt="Foto Aldi & Dilla 2"></div>
            <div class="gallery-item"><img src="https://picsum.photos/400/500?random=3" alt="Foto Aldi & Dilla 3"></div>
            <div class="gallery-item"><img src="https://picsum.photos/400/500?random=4" alt="Foto Aldi & Dilla 4"></div>
        </div>
        <div class="video-container hidden-for-animation">
            <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
      </section>

      <div id="lightbox"><img id="lightbox-img" src=""></div>

      <!-- ======================================== -->
      <!--              DIGITAL GIFT                -->
      <!-- ======================================== -->
      <section class="gift-section hidden-for-animation">
        <h2 class="section-title">Kado Digital</h2>
        <div class="gift-card">
          <i class="fas fa-gift"></i>
          <p>Doa restu Anda merupakan karunia yang sangat berarti bagi kami. Dan jika memberi adalah ungkapan tanda kasih, Anda dapat memberi kado secara digital.</p>
          <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Bank_Central_Asia_logo.svg/2560px-Bank_Central_Asia_logo.svg.png" alt="Bank Logo" class="bank-logo" style="height: 25px;">
          <p class="account-number" id="accountNumber">1234567890</p>
          <p>a.n. Aldiansyah</p>
          <button class="copy-button" id="copyButton"><i class="far fa-copy"></i> Salin No. Rekening</button>
        </div>
      </section>
      
      <!-- ======================================== -->
      <!--                   RSVP                   -->
      <!-- ======================================== -->
      <section class="rsvp-section hidden-for-animation">
        <div class="invitation-card">
            <h2 class="section-title" style="margin-top:0;">Konfirmasi Kehadiran</h2>
            <p>Merupakan suatu kehormatan dan kebahagiaan bagi kami apabila Bapak/Ibu/Saudara/i berkenan hadir untuk memberikan doa restu.</p>
            <button class="rsvp-button" id="rsvpButton">
                <i class="far fa-calendar-check"></i> RSVP
            </button>
        </div>
      </section>

      <!-- ======================================== -->
      <!--            HEALTH PROTOCOL               -->
      <!-- ======================================== -->
      <section class="health-protocol hidden-for-animation">
        <h2 class="section-title">Protokol Kesehatan</h2>
        <p>Demi menjaga kenyamanan dan kesehatan bersama, kami menghimbau para tamu undangan untuk tetap menjaga protokol kesehatan yang berlaku.</p>
      </section>
      
      <!-- ======================================== -->
      <!--                  FOOTER                  -->
      <!-- ======================================== -->
      <footer class="footer hidden-for-animation">
        <p>Terima kasih atas doa dan restu Anda.</p>
        <h2 class="couple-names" style="font-size: 2rem;">Aldi & Dilla</h2>
      </footer>
    </div>
  </main>

  <audio id="backgroundMusic" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    Browser Anda tidak mendukung elemen audio.
  </audio>

  <script>
    document.addEventListener("DOMContentLoaded", function() {

      // --- Nama Tamu dari URL ---
      const urlParams = new URLSearchParams(window.location.search);
      let guestName = urlParams.get('to') || 'Tamu Undangan';
      guestName = guestName.replace(/_/g, ' ').replace(/\+/g, ' ');
      document.getElementById("guestNameToOpen").textContent = guestName;
      document.getElementById("guestName").value = guestName;

      const cover = document.getElementById('cover');
      const openButton = document.getElementById('openInvitation');
      const mainContent = document.getElementById('main-content');
      const backgroundMusic = document.getElementById("backgroundMusic");
      const musicControl = document.getElementById("musicControl");

      // --- Buka Undangan ---
      openButton.addEventListener('click', () => {
        cover.classList.add('hidden');
        mainContent.style.display = 'block';
        document.body.style.overflowY = 'auto';
        
        // Coba putar musik
        backgroundMusic.volume = 0.3;
        backgroundMusic.play().then(() => {
          musicControl.classList.add('playing');
        }).catch(e => {
          console.log("Autoplay dicegah oleh browser, perlu interaksi manual.");
        });

        // Buat kelopak bunga saat undangan dibuka
        createPetals();
        
        // Aktifkan scroll animations
        observeSections();
      });

      // --- Kontrol Musik ---
      musicControl.addEventListener("click", function() {
        if (backgroundMusic.paused) {
          backgroundMusic.play();
          musicControl.classList.add('playing');
        } else {
          backgroundMusic.pause();
          musicControl.classList.remove('playing');
        }
      });

      // --- Countdown Timer ---
      const weddingDate = new Date("December 20, 2025 10:00:00").getTime();
      const countdownInterval = setInterval(function() {
        const now = new Date().getTime();
        const distance = weddingDate - now;

        document.getElementById("days").innerText = Math.floor(distance / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
        document.getElementById("hours").innerText = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
        document.getElementById("minutes").innerText = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
        document.getElementById("seconds").innerText = Math.floor((distance % (1000 * 60)) / 1000).toString().padStart(2, '0');

        if (distance < 0) {
          clearInterval(countdownInterval);
          document.getElementById("days").innerText = "00";
          document.getElementById("hours").innerText = "00";
          document.getElementById("minutes").innerText = "00";
          document.getElementById("seconds").innerText = "00";
        }
      }, 1000);

      // --- Animasi Saat Scroll ---
      function observeSections() {
        const sections = document.querySelectorAll('.hidden-for-animation');
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('visible');
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1 });

        sections.forEach(section => {
          observer.observe(section);
        });
      }
      
      // --- Kelopak Bunga Jatuh ---
      function createPetals() {
        const container = document.getElementById('petalsContainer');
        if (!container) return;
        const petalCount = 20;
        for (let i = 0; i < petalCount; i++) {
          const petal = document.createElement('div');
          petal.classList.add('petal');
          const size = Math.random() * 15 + 5;
          petal.style.width = `${size}px`;
          petal.style.height = `${size}px`;
          petal.style.left = `${Math.random() * 100}vw`;
          petal.style.animationDuration = `${Math.random() * 10 + 8}s`;
          petal.style.animationDelay = `${Math.random() * 5}s`;
          petal.style.setProperty('--sway', Math.random() * 2 - 1);
          container.appendChild(petal);
        }
      }

      // --- Galeri Lightbox ---
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightbox-img');
      document.querySelectorAll('.gallery-item img').forEach(image => {
        image.addEventListener('click', () => {
          lightbox.classList.add('active');
          lightboxImg.src = image.src;
        });
      });
      lightbox.addEventListener('click', () => {
        lightbox.classList.remove('active');
      });

      // --- Tombol Salin No. Rekening ---
      const copyButton = document.getElementById('copyButton');
      copyButton.addEventListener('click', () => {
        const accountNumber = document.getElementById('accountNumber').textContent;
        navigator.clipboard.writeText(accountNumber).then(() => {
          copyButton.innerHTML = '<i class="fas fa-check"></i> Tersalin!';
          setTimeout(() => {
            copyButton.innerHTML = '<i class="far fa-copy"></i> Salin No. Rekening';
          }, 2000);
        });
      });

      // --- Fungsionalitas Modal RSVP ---
      const rsvpModal = document.getElementById("rsvpModal");
      const rsvpButton = document.getElementById("rsvpButton");
      const closeModal = document.getElementById("closeModal");
      
      const openRsvpForm = () => {
        rsvpModal.style.display = "flex";
        document.body.style.overflow = "hidden";
      };
      const closeRsvpForm = () => {
        rsvpModal.style.display = "none";
        document.body.style.overflow = "auto";
      };

      rsvpButton.addEventListener("click", openRsvpForm);
      closeModal.addEventListener("click", closeRsvpForm);
      window.addEventListener("click", (event) => {
        if (event.target === rsvpModal) closeRsvpForm();
      });

      document.querySelectorAll(".attendance-option").forEach(option => {
        option.addEventListener("click", function() {
          document.querySelectorAll(".attendance-option").forEach(opt => opt.classList.remove("selected"));
          this.classList.add("selected");
          document.getElementById("attendanceStatusInput").value = this.getAttribute("data-value");
        });
      });

      // Submit RSVP ke Google Sheets
      const submitRsvpButton = document.getElementById("submitRsvp");
      const rsvpFormElement = document.getElementById("rsvpFormElement");

      submitRsvpButton.addEventListener("click", () => {
        const rsvpFormDisplay = document.querySelector("#rsvpModal form");
        const loadingIndicator = document.getElementById("loadingIndicator");
        const successMessage = document.getElementById("successMessage");
        
        rsvpFormDisplay.style.display = "none";
        loadingIndicator.style.display = "block";

        // Ganti URL ini dengan URL Google Apps Script Anda
        const scriptURL = 'https://script.google.com/macros/s/AKfycbzejNozKjJGFjaP2g3h2VII1whGrde6mjFICuvUvr2D7OtpYttHv_OAmfRwE14DLhpakg/exec';
      
        fetch(scriptURL, { method: 'POST', body: new FormData(rsvpFormElement) })
        .then(response => {
            console.log('Success!', response);
            loadingIndicator.style.display = "none";
            successMessage.style.display = "block";
    
            setTimeout(() => {
              closeRsvpForm();
              // Reset form setelah beberapa saat
              setTimeout(() => {
                successMessage.style.display = "none";
                rsvpFormDisplay.style.display = "block";
              }, 500);
            }, 3000);
        })
        .catch(error => {
            console.error('Error!', error.message);
            loadingIndicator.style.display = "none";
            rsvpFormDisplay.style.display = "block";
            alert("Gagal mengirim konfirmasi. Silakan coba lagi.");
        });
      });
    });
  </script>
</body>
</html>
